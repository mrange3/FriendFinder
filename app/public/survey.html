<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B"
        crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <div class="row">
            <h1>Survey Quetions</h1>
        </div>
        <div class="row">
            <h2>About You</h2>
        </div>
        <!---=============Text Form ===================-->
        <div class="form-group row">
            <label for="example-text-input" class="col-2 col-form-label">Name:</label>
            <div class="col-8">
                <input class="form-control" type="text" value="Name" id="name_input">
            </div>
        </div>
        <div class="form-group row">
            <label for="example-search-input" class="col-2 col-form-label">Image Link:</label>
            <div class="col-8">
                <input class="form-control" type="search" value="Image URL" id="image_input">
            </div>
        </div>
        <!-- ========Survey================== -->


        <!-- ========Question 1 =========== -->
        <form>
            <h2>1. Do you think Star Wars is one of the best movies of all time?</h2>
            <div class="form-check form-check-inline mb-4">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question1" id="q1v1" value="1"> 1
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question1" id="q1v2" value="2"> 2
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question1" id="q1v3" value="3"> 3
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question1" id="q1v4" value="4"> 4
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question1" id="q1v5" value="5"> 5
                </label>
            </div>
        </form>
        <!-- ========Question 2 =========== -->
        <form>
            <h2>2. Do you think rock is the best genre of music?</h2>
            <div class="form-check form-check-inline mb-4">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question2" id="q2v1" value="1"> 1
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question2" id="q2v2" value="2"> 2
                </label>
            </div>
            <div class="form-check form-check-inline disabled">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question2" id="q2v3" value="3"> 3
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question2" id="q2v4" value="4"> 4
                </label>
            </div>
            <div class="form-check form-check-inline disabled">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question2" id="q2v5" value="5"> 5
                </label>
            </div>
        </form>
        <!-- ========Question 3 =========== -->
        <form></form>
        <h2>3. Do you value physical appearance(1) or intellegence(5) more?</h2>
        <div class="form-check form-check-inline mb-4">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="question3" id="q3v1" value=1> 1
            </label>
        </div>
        <div class="form-check form-check-inline">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="question3" id="q3v2" value=2> 2
            </label>
        </div>
        <div class="form-check form-check-inline disabled">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="question3" id="q3v3" value=3> 3
            </label>
        </div>
        <div class="form-check form-check-inline">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="question3" id="q3v4" value=4> 4
            </label>
        </div>
        <div class="form-check form-check-inline disabled">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="question3" id="q3v5" value=5> 5
            </label>
        </div>
        </form>
        <!-- ========Question 4 =========== -->
        <form>
            <h2>4. Do you consider yourself good at sports?</h2>
            <div class="form-check form-check-inline mb-4">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question4" id="q4v1" value="1"> 1
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question4" id="q4v2" value="2"> 2
                </label>
            </div>
            <div class="form-check form-check-inline disabled">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question4" id="q4v3" value="3"> 3
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question4" id="q4v4" value="4"> 4
                </label>
            </div>
            <div class="form-check form-check-inline disabled">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question4" id="q4v5" value="5"> 5
                </label>
            </div>
        </form>
        <!-- ========Question 5 =========== -->
        <form>
            <h2>5. You are generally easy-going</h2>
            <div class="form-check form-check-inline mb-4">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question5" id="q5v1" value="1"> 1
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question5" id="q5v2" value="2"> 2
                </label>
            </div>
            <div class="form-check form-check-inline disabled">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question5" id="q5v3" value="3"> 3
                </label>
            </div>
            <div class="form-check form-check-inline">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question5" id="q5v4" value="4"> 4
                </label>
            </div>
            <div class="form-check form-check-inline disabled">
                <label class="form-check-label">
                    <input class="form-check-input" type="radio" name="question5" id="q5v5" value="5"> 5
                </label>
            </div>
        </form>

        <button type="submit" class="btn btn-primary submit" data-toggle="modal" data-target="#myModal">Submit</button>


<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
      
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id ="match-name">Modal Header</h4>
            </div>
            <div class="modal-body" id="image-holder">
              <p>Some text in the modal.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" >Close</button>
            </div>
          </div>
      
        </div>
      </div>
      


    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em"
        crossorigin="anonymous"></script>
</body>

</html>

<script type="text/javascript">

    $(".submit").on("click", function (event) {
        event.preventDefault();



        var question1 = parseInt($('input[name=question1]:checked').val());
        var question2 = parseInt($('input[name=question2]:checked').val());
        var question3 = parseInt($('input[name=question3]:checked').val());
        var question4 = parseInt($('input[name=question4]:checked').val());
        var question5 = parseInt($('input[name=question5]:checked').val());


        var surveyScores = [question1, question2, question3, question4, question5,]
        var surveySum = (question1 + question2 + question3 + question4 + question5)
        console.log($("#name_input").val().trim())
        console.log($("#image_input").val().trim())
        console.log(surveyScores)
        console.log(surveySum)

        var newfriend = {
            name: $("#name_input").val().trim(),
            photo: $("#image_input").val().trim(),
            scores: surveyScores,
            sum: surveySum,
        };


        $.post("/api/friends", newfriend)
            .then(function (data) {
                console.log(newfriend)
                console.log(data);
            });



        $.get("/api/friends")
            .then(function (friends) {
                var scoresArray = [];
                differencesArray =[];
                for (var i = 0; i < friends.length-1; i++) {
                    var parsedScores = [];
                    var differences = 0;
                    for (var j = 0; j < friends[i].scores.length; j++) {
                        parsedScores.push(parseInt(friends[i].scores[j]));
                        differences += (Math.abs(friends[i].scores[j]-surveyScores[j]));
                    }
                    scoresArray.push(parsedScores);
                    differencesArray.push(differences)
                }

                var matchIndex = differencesArray.indexOf(Math.min(...differencesArray))

                console.log(Math.min(...differencesArray))
                console.log(matchIndex);
                console.log(scoresArray);
                console.log(differencesArray)
                console.log("Your Match is: " + friends[matchIndex].name);

                $("#match-name").text("Your Match is: " + friends[matchIndex].name)
                $("#image-holder").html(`<img src="${friends[matchIndex].photo}">`)

                
            });



    });

</script>